package xyz.soongkun.roast.module.t_poster.service;import java.util.Date;import java.util.List;import org.hibernate.criterion.DetachedCriteria;import org.hibernate.criterion.Projection;import org.hibernate.criterion.Projections;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import xyz.soongkun.roast.common.model.PageBean;import xyz.soongkun.roast.common.service.BasePageQueryService;import xyz.soongkun.roast.module.t_poster.dao.PosterDao;import xyz.soongkun.roast.module.t_poster.model.Poster;import xyz.soongkun.roast.module.t_user.model.User;@Service("posterService")public class PosterServiceImpl implements PosterService {    @Autowired    private BasePageQueryService basePageQueryService;    @Autowired    private PosterDao posterDao;    public void saveContent(String content, User user) {        Poster poster = new Poster();        poster.setContent(content);        poster.setPostDate(new Date());        poster.setPostUser(user);        this.posterDao.saveContent(poster);    }    public PageBean<Poster> getPosterData(DetachedCriteria criteria, int page) {        criteria.setProjection(Projections.rowCount());        long totalItem = this.basePageQueryService.getDataPagesCount(criteria);        criteria.setProjection((Projection)null);        List<Poster> data = this.basePageQueryService.getDataPages(criteria, page);        PageBean<Poster> pageBean = new PageBean();        pageBean.setData(data);        pageBean.setPage(page);        pageBean.setCount(data.size());        pageBean.setPageMaxNumber(BasePageQueryService.MAX_PAGE_ITEMS);        pageBean.setTotalItem(Math.toIntExact(totalItem));        return pageBean;    }}